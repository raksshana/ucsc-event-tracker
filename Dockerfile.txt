# syntax=docker/dockerfile:1
FROM node:22-alpine

# Create app dir
WORKDIR /app

# Install deps
COPY package*.json ./
RUN npm ci --omit=dev

# Copy source
COPY . .

# Runtime config
ENV NODE_ENV=production
# Cloud Run will set PORT; your server already uses process.env.PORT || 3000
ENV PORT=8080
EXPOSE 8080

# Start the server
CMD ["node", "server.js"]
